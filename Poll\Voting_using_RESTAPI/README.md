# Voting / Polling App (Flask + MySQL + REST API)

A simple polling application built with Flask, MySQL, and Flask-Login.  
Users can register, log in, create polls, share them publicly, collect votes, and view results.  
Voting is restricted to one per user per poll using cookies.

---

## 🚀 Features
- User Registration & Login (Flask-Login)
- Create Polls with multiple options
- Public voting via shareable links
- Prevents double voting with cookies
- Poll results visible **only to poll owner**
- Delete polls (only by owner)
- REST API endpoints protected with JWT
- Postman Collection for end-to-end testing

---

## 📂 Project Structure
```
Voting_or_polling_using_REST_API/
│── app/
│   ├── __init__.py
│   ├── extensions.py
│   ├── models.py
│   ├── auth/
│   │   └── routes.py
│   ├── web/
│   │   └── views.py
│   └── templates/
│       ├── base.html
│       ├── index.html
│       ├── create_poll.html
│       ├── poll_public.html
│       ├── login.html
│       └── register.html
│── migrations/        # Flask-Migrate files (autogenerated)
│── run.py             # Entry point
│── requirements.txt   # Dependencies
│── README.md          # Documentation (this file)
```

---

## ⚙️ Setup Instructions

### 1️⃣ Clone the repository
```bash
git clone https://github.com/yourusername/voting-app.git
cd voting-app
```

### 2️⃣ Create Virtual Environment & Install Dependencies
```bash
# Create virtual environment (Windows)
python -m venv .venv

# Activate virtual environment (Windows PowerShell)
.venv\Scripts\activate

# Activate virtual environment (Linux/Mac)
source .venv/bin/activate

# Install dependencies
pip install -r requirements.txt
```

### 3️⃣ Setup MySQL Database
```sql
-- Open MySQL and create database
CREATE DATABASE voting_app;

-- (Optional) Create user and grant privileges
CREATE USER 'vote_user'@'localhost' IDENTIFIED BY 'yourpassword';
GRANT ALL PRIVILEGES ON voting_app.* TO 'vote_user'@'localhost';
FLUSH PRIVILEGES;
```

### 4️⃣ Configure Database in Flask (`.env`)
Make sure the connection URL in `SQLALCHEMY_DATABASE_URI` is correct:
```python
app.config["SQLALCHEMY_DATABASE_URI"] = "mysql+pymysql://root:yourpassword@localhost/voting_app"
```

### 5️⃣ Run Migrations
```bash
# Initialize migrations (only first time)
flask db init

# Generate migration
flask db migrate -m "initial migration"

# Apply migration
flask db upgrade
```

### 6️⃣ Run the App
```bash
flask run
```
App will start at: 👉 http://127.0.0.1:5000

---

## 🧪 Testing with Postman
1. Open **Postman**
2. Import the provided collection (`test_using_postman.json`)
3. Run the following sequence:
   - `Register` → Register a new user
   - `Login` → Get login session
   - `Create Poll` → Create a poll
   - `Get Polls` → List all polls
   - `Vote on Poll` → Vote on a poll
   - `Vote Again (should fail)` → Prevents double voting

Expected Results:
- Registration → Success message
- Login → Redirect to homepage
- Create Poll → Success message
- Get Polls → List of polls
- Vote → `Thanks for voting!`
- Vote Again → Error message: `You already voted on this poll.`

---

## 🔑 Notes
- Delete a poll → only the owner can delete.
- Poll results → visible only to poll creator.
- Cookies in browser prevent double voting.
- Use **Incognito Mode** or clear cookies to test fresh voting.

---

## ✅ Requirements
- Python 3.11+
- MySQL 8+
- Flask 3+
- Flask-SQLAlchemy
- Flask-Migrate
- Flask-Login
- PyMySQL

---

