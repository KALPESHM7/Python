{% extends "base.html" %}
{% block content %}
  <h2>Sign the Guestbook</h2>

  {% if error %}
    <p style="color: red;">{{ error }}</p>
  {% endif %}

  <form method="POST">
    <label>
      Name (optional):
      <input type="text" name="author" value="{{ old_author|default('') }}">
    </label>
    <br><br>
    <label>
      Message:
      <br>
      <textarea name="message" rows="4" cols="50" required>{{ old_message|default('') }}</textarea>
    </label>
    <br>
    <input type="submit" value="Submit">
  </form>

  <hr>

  <h3>Messages</h3>
  {% if messages %}
    <ul>
      {% for m in messages %}
        <li>
          <a href="{{ url_for('message_detail', msg_id=m['id']) }}">
            #{{ m['id'] }} â€” <strong>{{ m['author'] }}</strong>:
            {{ m['text'][:60] }}{% if m['text']|length > 60 %}...{% endif %}
          </a>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No messages yet. Be the first!</p>
  {% endif %}
{% endblock %}
